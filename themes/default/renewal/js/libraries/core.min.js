window.izwebz=[];(function(e,t){t["core"]={facebook:{userInformation:{id:null,email:null,profile_picture:null,education:[],first_name:null,last_name:null,name:null,gender:null,hometown:[],id:null,link:null,locale:null,location:[],timezone:null,updated_time:null,username:null,verified:null,work:[]},init:function(e){var t=this;window.fbAsyncInit=function(){FB.init({appId:e,status:true,cookie:true,xfbml:true})}},isLogin:function(){var t=this;FB.getLoginStatus(function(n){if(n.status==="connected"){e.post(jquery_core.ajax_url,{action:"checkFaceBookUser",userID:n.authResponse.userID,token:n.authResponse.accessToken},function(e){if(e.success==true){t.addUser(n.authResponse.userID)}else{return false}})}})},login:function(){var e=this;if(e.isLogin()==true){window.location.reload()}else{FB.login(function(t){t=t.authResponse;if(t.userID){e.addUser(t.userID)}},{scope:"email"})}},logout:function(){FB.getLoginStatus(function(t){if(t.status==="connected"){t=t.authResponse;if(t.userID){e.post(jquery_core.ajax_url,{action:"updateStatusFaceBookUser",userID:t.userID},function(e){if(e.success==true){window.location.reload()}})}}})},postFeed:function(e,t,n,r,i){FB.ui({method:"feed",name:e,caption:t,description:n,link:r,picture:i},function(e){if(e&&e.post_id){alert("Cảm ơn bạn đã chia sẽ bài viết này")}return false})},addUser:function(t){var n=this.userInformation;var r=0;var i=/^[+-]?\d+(\.\d+)?([eE][+-]?\d+)?/;FB.api("/"+t,function(t){if(t.id!=null){n.id=t.id;n.profile_picture="https://graph.facebook.com/"+t.id+"/picture?width=32&height=32";n.email=t.email;n.first_name=t.first_name;n.last_name=t.last_name;n.gender=t.gender;n.link=t.link;n.locale=t.locale;n.name=t.name;n.timezone=t.timezone;n.updated_time=t.updated_time;n.username=t.username;n.verified=t.verified;if(izwebz.core.support.isset(t.education)){e.each(t.education,function(e,t){var r;if(izwebz.core.support.isset(t.school)){r="School:"+t.school.name}if(izwebz.core.support.isset(t.type)){r=r+"|Type:"+t.type}n.education[e]=r})}if(izwebz.core.support.isset(t.hometown)){e.each(t.hometown,function(e,t){if(!i.test(t)){n.hometown[r]=t}r++});r=0}if(izwebz.core.support.isset(t.location)){e.each(t.location,function(e,t){if(!i.test(t)){n.location[r]=t}r++})}if(izwebz.core.support.isset(t.work)){e.each(t.work,function(e,t){var r;if(izwebz.core.support.isset(t.employer)){r="Employer:"+t.employer.name}if(izwebz.core.support.isset(t.location)){r=r+"|Location:"+t.location.name}if(izwebz.core.support.isset(t.position)){r=r+"|Position:"+t.position.name}if(izwebz.core.support.isset(t.start_date)){r=r+"|StartDate:"+t.start_date}n.work[e]=r})}e.post(jquery_core.ajax_url,{action:"saveUserProfile",data:n},function(e){if(e.success==true){window.location.reload()}})}else{}})}},support:{isset:function(e){return typeof e!="undefined"},ltrim:function(e,t){t=t||"\\s";return e.replace(new RegExp("^["+t+"]+","g"),"")},crypte:function(e,t){var n=927045632101274e4;var r=/^[+-]?\d+(\.\d+)?([eE][+-]?\d+)?/;var i=657;if(!r.test(t)){for(var s=1;s<=t.length;s++){i+=this.ord(this.substr(t,s,1))}var o=n*i*this.strlen(t)}else{var o=n*t}return Math.round(e*o/0x388ce44c9eba22000+5746)},decrypte:function(e,t){var n=927045632101274e4;var r=/^[+-]?\d+(\.\d+)?([eE][+-]?\d+)?/;var i=657;if(!r.test(t)){for(var s=1;s<=t.length;s++){i+=this.ord(this.substr(t,s,1))}var o=n*i*this.strlen(t)}else{var o=n*t}return Math.round((e-5746)*0x388ce44c9eba22000/o)},sha1:function(e){var t=function(e,t){var n=e<<t|e>>>32-t;return n};var n=function(e){var t="";var n;var r;for(n=7;n>=0;n--){r=e>>>n*4&15;t+=r.toString(16)}return t};var r;var i,s;var o=new Array(80);var u=1732584193;var a=4023233417;var f=2562383102;var l=271733878;var c=3285377520;var h,p,d,v,m;var g;e=unescape(encodeURIComponent(e));var y=e.length;var b=[];for(i=0;i<y-3;i+=4){s=e.charCodeAt(i)<<24|e.charCodeAt(i+1)<<16|e.charCodeAt(i+2)<<8|e.charCodeAt(i+3);b.push(s)}switch(y%4){case 0:i=2147483648;break;case 1:i=e.charCodeAt(y-1)<<24|8388608;break;case 2:i=e.charCodeAt(y-2)<<24|e.charCodeAt(y-1)<<16|32768;break;case 3:i=e.charCodeAt(y-3)<<24|e.charCodeAt(y-2)<<16|e.charCodeAt(y-1)<<8|128;break}b.push(i);while(b.length%16!=14){b.push(0)}b.push(y>>>29);b.push(y<<3&4294967295);for(r=0;r<b.length;r+=16){for(i=0;i<16;i++){o[i]=b[r+i]}for(i=16;i<=79;i++){o[i]=t(o[i-3]^o[i-8]^o[i-14]^o[i-16],1)}h=u;p=a;d=f;v=l;m=c;for(i=0;i<=19;i++){g=t(h,5)+(p&d|~p&v)+m+o[i]+1518500249&4294967295;m=v;v=d;d=t(p,30);p=h;h=g}for(i=20;i<=39;i++){g=t(h,5)+(p^d^v)+m+o[i]+1859775393&4294967295;m=v;v=d;d=t(p,30);p=h;h=g}for(i=40;i<=59;i++){g=t(h,5)+(p&d|p&v|d&v)+m+o[i]+2400959708&4294967295;m=v;v=d;d=t(p,30);p=h;h=g}for(i=60;i<=79;i++){g=t(h,5)+(p^d^v)+m+o[i]+3395469782&4294967295;m=v;v=d;d=t(p,30);p=h;h=g}u=u+h&4294967295;a=a+p&4294967295;f=f+d&4294967295;l=l+v&4294967295;c=c+m&4294967295}g=n(u)+n(a)+n(f)+n(l)+n(c);return g.toLowerCase()},ord:function(e){var t=e+"",n=t.charCodeAt(0);if(55296<=n&&n<=56319){var r=n;if(t.length===1){return n}var i=t.charCodeAt(1);return(r-55296)*1024+(i-56320)+65536}if(56320<=n&&n<=57343){return n}return n},substr:function(e,t,n){var r=0,i=true,s=0,o=0,u=0,a="";e+="";var f=e.length;var l="on";switch(l){case"on":for(r=0;r<e.length;r++){if(/[\uD800-\uDBFF]/.test(e.charAt(r))&&/[\uDC00-\uDFFF]/.test(e.charAt(r+1))){i=false;break}}if(!i){if(t<0){for(r=f-1,s=t+=f;r>=s;r--){if(/[\uDC00-\uDFFF]/.test(e.charAt(r))&&/[\uD800-\uDBFF]/.test(e.charAt(r-1))){t--;s--}}}else{var c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;while(c.exec(e)!=null){var h=c.lastIndex;if(h-2<t){t++}else{break}}}if(t>=f||t<0){return false}if(n<0){for(r=f-1,o=f+=n;r>=o;r--){if(/[\uDC00-\uDFFF]/.test(e.charAt(r))&&/[\uD800-\uDBFF]/.test(e.charAt(r-1))){f--;o--}}if(t>f){return false}return e.slice(t,f)}else{u=t+n;for(r=t;r<u;r++){a+=e.charAt(r);if(/[\uD800-\uDBFF]/.test(e.charAt(r))&&/[\uDC00-\uDFFF]/.test(e.charAt(r+1))){u++}}return a}break};case"off":default:if(t<0){t+=f}f=typeof n==="undefined"?f:n<0?n+f:n+t;return t>=e.length||t<0||t>f?!1:e.slice(t,f)}return undefined},strlen:function(e){var t=e+"";var n=0,r="",i=0;var s="on";if(s!=="on"){return e.length}var o=function(e,t){var n=e.charCodeAt(t);var r="",i="";if(55296<=n&&n<=56319){if(e.length<=t+1){throw"High surrogate without following low surrogate"}r=e.charCodeAt(t+1);if(56320>r||r>57343){throw"High surrogate without following low surrogate"}return e.charAt(t)+e.charAt(t+1)}else if(56320<=n&&n<=57343){if(t===0){throw"Low surrogate without preceding high surrogate"}i=e.charCodeAt(t-1);if(55296>i||i>56319){throw"Low surrogate without preceding high surrogate"}return false}return e.charAt(t)};for(n=0,i=0;n<t.length;n++){if((r=o(t,n))===false){continue}i++}return i},createEmail:function(t){if(e(t).attr("data-email")!=""){e("body").append("<div id='dialogPopup'></div>");var n="<form action='' method='POST' id='dialogSendMail'>";n=n+"<p><label for='subject'>Subject<em>*</em></label>";n=n+"<input type='text' name='subject' id='subject' class='text ui-widget-content ui-corner-all'></p>";n=n+"<p><label for='messages'>Messages<em>*</em></label>";n=n+"<textarea name='messages' id='messages' class='text ui-widget-content ui-corner-all'></textarea></p>";n=n+"</form>";e("#dialogPopup").empty().append(n);e.fx.speeds._default=1e3;e("#dialogPopup").dialog({autoOpen:false,closeOnEscape:true,draggable:false,resizable:false,width:420,show:"explode",hide:"explode",modal:true,title:"Create Email",buttons:{Send:function(){if(e("#subject").val()==""){e("#subject").addClass("error_input");e("#subject").addClass("ui-state-error");return false}if(e("#messages").val()==""){e("#messages").addClass("error_input");e("#messages").addClass("ui-state-error");return false}e(".ui-dialog-buttonpane").append("<div class='loading_ajax'></div>");e(".loading_ajax").html('<img src="'+jquery_core.ajax_image+'ajax-loader.gif"/>').fadeIn(500);e.post(jquery_core.ajax_url,{action:"createEmailAJAX",email:e(t).attr("data-email"),subject:e("#subject").val(),messages:e("#messages").val(),template:e(t).attr("data-template")},function(t){if(t.success==true){e(".loading_ajax").fadeOut();e("#subject").val("");e("#messages").val("")}else{alert("Can't sending");return false}})},Cannel:function(){e(this).dialog("close")}}});e("#dialogPopup").dialog("open")}else{alert("Email is empty");return false}}}}})(jQuery,izwebz);var eventClickControl=function(e){var t=null;var n=null;var r=true;return{registerEvent:function(t,n){eventClickControl.isFirstClick=true;e(document).on("click",t,function(e){if(eventClickControl.isFirstClick){eventClickControl.setObj(this);clearTimeout(eventClickControl.getTimeout());eventClickControl.setTimeout(setTimeout("eventClickControl.execute()",n));e.stopImmediatePropagation();return false}else{eventClickControl.isFirstClick=true}})},execute:function(){if(this.isFirstClick){this.isFirstClick=false;e(this.objLast).click()}},setObj:function(e){this.objLast=e},setTimeout:function(e){this.intTimeout=e},getTimeout:function(){return this.intTimeout}}}(jQuery);izwebz.core.facebook.init("745967472092415")